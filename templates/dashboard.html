<!DOCTYPE html>
<html>
<head>
    <title>Intraday Market Pulse</title>
    <style>
        body{
            background:#0b1622;
            color:white;
            font-family:Arial;
        }
        .container{
            display:flex;
            gap:20px;
        }
        .panel{
            flex:1;
            border:1px solid #2a3b4d;
            padding:15px;
            border-radius:10px;
            background:#0f1f2e;
        }
        table{
            width:100%;
            border-collapse:collapse;
        }
        th,td{
            padding:8px;
            border-bottom:1px solid #2a3b4d;
            text-align:left;
        }
        th{
            color:#7fb3ff;
        }
        .bullish{
            color:#00ff88;
            font-weight:700;
        }
        .bearish{
            color:#ff4d4d;
            font-weight:700;
        }
        h2{
            margin-top:0;
        }
    </style>
</head>
<body>

<h1>Intraday Market Pulse</h1>
<div>Last Updated: <span id="time"></span></div>

<div class="container">
    <!-- LEFT PANEL -->
    <div class="panel">
        <h2>ðŸŸ¡ INTRADAY BREAKOUT</h2>
        <table>
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Score</th>
                    <th>Signal</th>
                    <th>Chart</th>
                </tr>
            </thead>
            <tbody id="breakout-body"></tbody>
        </table>
    </div>

    <!-- RIGHT PANEL -->
    <div class="panel">
        <h2>ðŸŸ¢ INTRADAY BOOST</h2>
        <table>
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Boost</th>
                    <th>Signal</th>
                    <th>Chart</th>
                </tr>
            </thead>
            <tbody id="boost-body"></tbody>
        </table>
    </div>
</div>

<script>
function getClass(signal){
    if(signal.includes("BULLISH")) return "bullish";
    if(signal.includes("BEARISH")) return "bearish";
    return "";
}

async function loadData(){
    const res = await fetch('/intraday-boost');
    const json = await res.json();

    const rows = json.data || [];

    let html = "";
    rows.forEach(row=>{
        const cls = getClass(row.signal);
        html += `
            <tr>
                <td class="${cls}">${row.symbol}</td>
                <td>${row.boost_score}</td>
                <td class="${cls}">${row.signal}</td>
                <td>
                    <a target="_blank"
                    href="https://www.tradingview.com/chart/?symbol=NSE:${row.symbol}">
                    View</a>
                </td>
            </tr>
        `;
    });

    document.getElementById("breakout-body").innerHTML = html;
    document.getElementById("boost-body").innerHTML = html;
    document.getElementById("time").innerText = new Date().toLocaleTimeString();
}

loadData();
setInterval(loadData, 15000);
</script>

</body>
</html>
