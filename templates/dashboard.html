<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Intraday Market Pulse</title>

  <style>
    body {
      background:#0f172a;
      color:#e5e7eb;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 10px;
    }

    h2 {
      margin: 5px 0 10px 0;
    }

    h3 {
      margin: 5px 0 10px 0;
    }

    a {
      color:#38bdf8;
      text-decoration:none;
    }

    table {
      width:100%;
      border-collapse: collapse;
      font-size:14px;
    }

    th, td {
      padding:8px;
      border-bottom:1px solid #334155;
      text-align:left;
    }

    th {
      background:#020617;
      font-weight:600;
    }

    .container {
      display:flex;
      gap:20px;
      margin-top:10px;
    }

    .panel {
      width:50%;
      border:1px solid #ffffff;   /* WHITE BORDER */
      border-radius:6px;
      padding:10px;
      background:#020617;
    }

    .updated {
      font-size:13px;
      color:#94a3b8;
      margin-bottom:10px;
    }
  </style>
</head>

<body>

<h2>ðŸ“Š Intraday Market Pulse</h2>
<div class="updated" id="time">Loading...</div>

<div class="container">

  <!-- LEFT PANEL -->
  <div class="panel">
    <h3>ðŸŸ¡ INTRADAY BREAKOUT</h3>
    <table>
      <thead>
        <tr>
          <th>SYMBOL</th>
          <th>SCORE</th>
          <th>SIGNAL</th>
          <th>CHART</th>
        </tr>
      </thead>
      <tbody id="candidates"></tbody>
    </table>
  </div>

  <!-- RIGHT PANEL -->
  <div class="panel">
    <h3>ðŸŸ¢ INTRADAY BOOST</h3>
    <table>
      <thead>
        <tr>
          <th>SYMBOL</th>
          <th>BOOST</th>
          <th>R</th>
          <th>SIGNAL</th>
          <th>CHART</th>
        </tr>
      </thead>
      <tbody id="boosted"></tbody>
    </table>
  </div>

</div>

<script>
async function loadData() {
  const res = await fetch("/intraday-boost");
  const json = await res.json();

  document.getElementById("time").innerText =
    "Last Updated: " + json.generated_at;

  const c = document.getElementById("candidates");
  const b = document.getElementById("boosted");

  c.innerHTML = "";
  b.innerHTML = "";

  // LEFT â€“ INTRADAY BREAKOUT
  json.data.candidates.forEach(s => {
    c.innerHTML += `
      <tr>
        <td>${s.symbol.toUpperCase()}</td>
        <td>${s.boost_score}</td>
        <td>${s.signal}</td>
        <td>
          <a target="_blank"
             href="https://www.tradingview.com/chart/?symbol=NSE:${s.symbol}">
            View
          </a>
        </td>
      </tr>`;
  });

  // RIGHT â€“ INTRADAY BOOST
  json.data.boosted.forEach(s => {
    b.innerHTML += `
      <tr>
        <td>${s.symbol.toUpperCase()}</td>
        <td>${s.boost_score}</td>
        <td>${s.r_factor}</td>
        <td>${s.signal}</td>
        <td>
          <a target="_blank"
             href="https://www.tradingview.com/chart/?symbol=NSE:${s.symbol}">
            View
          </a>
        </td>
      </tr>`;
  });
}

loadData();
setInterval(loadData, 120000); // 2 minutes
</script>

</body>
</html>
