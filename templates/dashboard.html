<!DOCTYPE html>
<html>
<head>
    <title>Intraday Market Pulse</title>
    <style>
        body{
            background:#0b1622;
            color:white;
            font-family:Arial, Helvetica, sans-serif;
        }
        h1{
            margin-bottom:5px;
        }
        table{
            width:100%;
            border-collapse:collapse;
            margin-top:15px;
        }
        th,td{
            padding:10px;
            text-align:left;
            border-bottom:1px solid #1f2c3a;
        }
        th{
            color:#7fc7ff;
            font-weight:600;
        }
        a{
            color:#4db8ff;
            text-decoration:none;
        }

        /* ðŸ”¥ COLOR LOGIC */
        .bullish{
            color:#00ff88;
            font-weight:700;
        }
        .bearish{
            color:#ff4d4d;
            font-weight:700;
        }

        .box{
            border:1px solid #2a3b4d;
            padding:15px;
            border-radius:8px;
            margin-top:20px;
        }
    </style>
</head>
<body>

<h1>ðŸ“Š Intraday Market Pulse</h1>
<div>Last Updated: <span id="time">--:--</span></div>

<div class="box">
    <h2>ðŸŸ¡ INTRADAY BREAKOUT</h2>
    <table>
        <thead>
            <tr>
                <th>SYMBOL</th>
                <th>SCORE</th>
                <th>SIGNAL</th>
                <th>CHART</th>
            </tr>
        </thead>
        <tbody id="breakout-body">
        </tbody>
    </table>
</div>

<script>
function getClass(signal){
    if(signal.includes("BULLISH")) return "bullish";
    if(signal.includes("BEARISH")) return "bearish";
    return "";
}

async function loadData(){
    const res = await fetch("/intraday-boost");
    const data = await res.json();

    document.getElementById("time").innerText = data.generated_at;

    const body = document.getElementById("breakout-body");
    body.innerHTML = "";

    data.data.candidates.forEach(row=>{
        const cls = getClass(row.signal);

        body.innerHTML += `
            <tr>
                <td class="${cls}">${row.symbol}</td>
                <td>${row.boost_score}</td>
                <td class="${cls}">${row.signal}</td>
                <td>
                    <a href="https://www.tradingview.com/chart/?symbol=NSE:${row.symbol}" target="_blank">
                        View
                    </a>
                </td>
            </tr>
        `;
    });
}

setInterval(loadData, 5000);
loadData();
</script>

</body>
</html>
