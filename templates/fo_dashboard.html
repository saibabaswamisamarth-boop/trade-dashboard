<script>
function arrow(s){
 return s==="BULLISH"
  ? '<span style="color:#00ff88;font-weight:700">▲</span>'
  : '<span style="color:#ff4d4d;font-weight:700">▼</span>';
}

async function loadData(){
 const r = await fetch("/intraday-data");
 const j = await r.json();

 let b="",bo="";

 j.breakout.forEach(x=>{
  b+=`<tr>
   <td>${x.symbol}</td>
   <td>${x.score}</td>
   <td>${x.rf_pct}%</td>
   <td>${arrow(x.signal)}</td>
   <td><a target="_blank" href="https://tradingview.com/chart/?symbol=NSE:${x.symbol}">View</a></td>
  </tr>`;
 });

 j.boost.forEach(x=>{
  bo+=`<tr>
   <td>${x.symbol}</td>
   <td>${x.score}</td>
   <td>${x.r_factor}%</td>
   <td>${arrow(x.signal)}</td>
   <td><a target="_blank" href="https://tradingview.com/chart/?symbol=NSE:${x.symbol}">View</a></td>
  </tr>`;
 });

 document.getElementById("breakout-body").innerHTML=b;
 document.getElementById("boost-body").innerHTML=bo;
 document.getElementById("time").innerText=j.time;
}

setInterval(loadData,15000);
loadData();
</script>
