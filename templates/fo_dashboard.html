<!DOCTYPE html>
<html>
<head>
  <title>Dashboard Test</title>
  <style>
    body { background:#0f172a; color:white; font-family:Arial; }
  </style>
</head>
<body>

<h1>âœ… Dashboard Loaded</h1>
<p>If you see this, HTML rendering is OK.</p>
<script>
async function loadData() {
  try {
    const r = await fetch("/market-pulse-v2");
    const res = await r.json();

    let html = `
      <table style="width:100%;border-collapse:collapse;margin-top:20px">
        <tr style="background:#020617">
          <tr>
  <th>Symbol</th>
  <th>Boost Score</th>
  <th>R-Factor</th>
  <th>Signal</th>
  <th>Chart</th>
</tr>
html += `
<tr>
  <td>${x.symbol}</td>

  <td>
    <b>${x.boost_score ?? x.pulse_score ?? "-"}</b>
  </td>

  <td>${x.r_factor}</td>

  <td>
    ${x.signal === "BULL"
      ? "<span style='color:#22c55e;font-weight:bold'>BULL</span>"
      : "<span style='color:#ef4444;font-weight:bold'>BEAR</span>"}
  </td>

  <td>
    <a href="https://www.tradingview.com/chart/?symbol=NSE:${x.symbol}"
       target="_blank"
       style="color:#38bdf8;text-decoration:none;font-weight:bold;">
       ðŸ“ˆ View
    </a>
  </td>
</tr>
`;

    `;

    res.data.forEach(x => {
      let pulse =
        x.pulse === "STRONG" ? "ðŸŸ¢ STRONG" :
        x.pulse === "MEDIUM" ? "ðŸŸ¡ MEDIUM" :
        "ðŸ”´ WEAK";

      html += `
        <tr>
          <td>${x.symbol}</td>
          <td>${x.signal}</td>
          <td>${x.price_change_pct}%</td>
          <td>${x.vwap_delta}</td>
          <td>${x.imbalance}</td>
          <td>${x.r_factor}</td>
          <td>${pulse}</td>
        </tr>
      `;
    });

    html += "</table>";

    document.body.innerHTML += html;

  } catch (e) {
    document.body.innerHTML += "<p style='color:red'>JS ERROR: " + e + "</p>";
  }
}

loadData();
</script>

</body>
</html>


