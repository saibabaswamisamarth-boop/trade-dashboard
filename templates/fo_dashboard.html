<!DOCTYPE html>
<html>
<head>
    <title>Intraday Market Pulse</title>
    <style>
        body{background:#0b1622;color:white;font-family:Arial;}
        .container{display:flex;gap:20px;}
        .panel{flex:1;border:1px solid #2a3b4d;padding:15px;border-radius:10px;background:#0f1f2e;}
        table{width:100%;border-collapse:collapse;}
        th,td{padding:8px;border-bottom:1px solid #2a3b4d;text-align:left;}
        th{color:#7fb3ff;}
        .bullish{color:#00ff88;font-weight:700;}
        .bearish{color:#ff4d4d;font-weight:700;}
        a{color:#7fb3ff;}
    </style>
</head>
<body>

<h1>Intraday Market Pulse</h1>
<div>Last Updated: <span id="time"></span></div>

<div class="container">

<div class="panel">
<h2>ðŸŸ¡ INTRADAY BREAKOUT</h2>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Score</th>
<th>Signal</th>
<th>Chart</th>
</tr>
</thead>
<tbody id="breakout-body"></tbody>
</table>
</div>

<div class="panel">
<h2>ðŸŸ¢ INTRADAY BOOST</h2>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Boost</th>
<th>R-Factor</th>
<th>Signal</th>
<th>Chart</th>
</tr>
</thead>
<tbody id="boost-body"></tbody>
</table>
</div>

</div>

<script>
function cls(s){return s.includes("BULLISH")?"bullish":"bearish";}
function link(s){return `https://www.tradingview.com/chart/?symbol=NSE:${s}`;}

async function load(){
 const r=await fetch('/intraday-data');
 const j=await r.json();

 let b="",bo="";

 j.breakout.forEach(x=>{
  b+=`<tr>
  <td class="${cls(x.signal)}">${x.symbol}</td>
  <td>${x.score}</td>
  <td class="${cls(x.signal)}">${x.signal}</td>
  <td><a target="_blank" href="${link(x.symbol)}">View</a></td>
  </tr>`;
 });

 j.boost.forEach(x=>{
  bo+=`<tr>
  <td class="${cls(x.signal)}">${x.symbol}</td>
  <td>${x.boost}</td>
  <td>${x.r_factor}</td>
  <td class="${cls(x.signal)}">${x.signal}</td>
  <td><a target="_blank" href="${link(x.symbol)}">View</a></td>
  </tr>`;
 });

 document.getElementById("breakout-body").innerHTML=b;
 document.getElementById("boost-body").innerHTML=bo;
 document.getElementById("time").innerText=j.time;
}

load();
setInterval(load,15000);
</script>

</body>
</html>
